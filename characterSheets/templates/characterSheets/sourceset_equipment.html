{% extends 'base_generic.html' %}
{% block extraLoads %}
<div class="modal fade" id="weaponModal" role="dialog" aria-label="Add Weapon Form" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Add Weapon</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <form method="post">
            {% csrf_token %}
                <div class="form-group">
{#                    {% if form.errors %}#}
{#                    {% for field in form %}#}
{#                        {% for error in field.errors %}#}
{#                            <div class="alert alert-danger">#}
{#                                <strong>{{ error|escape }}</strong>#}
{#                            </div>#}
{#                        {% endfor %}#}
{#                    {% endfor %}#}
{#                    {% for error in form.non_field_errors %}#}
{#                        <div class="alert alert-danger">#}
{#                            <strong>{{ error|escape }}</strong>#}
{#                        </div>#}
{#                    {% endfor %}#}
{#                    {% endif %}#}
                    <table>
                        {{ weaponForm.as_table }}
                    </table>
                </div>
                <button class="btn btn-primary" value="cancel" data-dismiss="modal" aria-label="cancel"> Cancel </button>
                <button class="btn btn-primary" value="submit" type="submit"> Add Weapon </button>
            </form>
        </div>
        </div>
    </div>
</div>
<div class="modal fade" id="armorModal" role="dialog" aria-label="Add Armor Form" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Add Armor</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <form method="post">
            {% csrf_token %}
                <div class="form-group">
                    <table>
                        {{ armorForm.as_table }}
                    </table>
                </div>
                <button class="btn btn-primary" value="cancel" data-dismiss="modal" aria-label="cancel"> Cancel </button>
                <button class="btn btn-primary" value="submit" type="submit"> Add Armor </button>
            </form>
        </div>
        </div>
    </div>
</div>
<div class="modal fade" id="miscModal" role="dialog" aria-label="Add Misc Equipment Form" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title">Add Misc Equipment</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <form method="post">
            {% csrf_token %}
                <div class="form-group">
                    <table>
                        {{ miscEquipForm.as_table }}
                    </table>
                </div>
                <button class="btn btn-primary" value="cancel" data-dismiss="modal" aria-label="cancel"> Cancel </button>
                <button class="btn btn-primary" value="submit" type="submit"> Add Misc Equipment </button>
            </form>
        </div>
        </div>
    </div>
</div>


{% endblock %}
{% block content %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
<a class="navbar-brand" href="{% url 'view-sourceset' ss.id %}">{{ ss.name }}</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>
<ul class="navbar-nav mr-auto">
    <li class="nav-item">
        <a class="nav-link" href="{% url 'sourceset-virtues' ss.id %}">Virtues</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'sourceset-flaws' ss.id %}">Flaws</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="{% url 'sourceset-abilities' ss.id %}">Abilities</a>
    </li>
    <li class="nav-item active">
        <a class="nav-link" href="{% url 'sourceset-equipment' ss.id %}">Equipment</a>
    </li>
</ul>
</nav>
<div class="row bg-info">
    <div class="col">
        Equipment
    </div>
</div>
    <div class="row border-bottom bg-info">
        <div class="col-6"> &emsp; Weapons </div>
        <div class="col">
            <button type="button" class="btn-primary btn" data-toggle="modal" data-target="#weaponModal">Add Weapon</button>
        </div>
    </div>
    {% for equip in ss.weapon_set.all %}
        <div class="row">
        <div class="col-6">
            {{ equip }}
        </div>
        <div class="col">
            <ul class='list-group'>
                <li class='list-group-item'><b>Description: </b>{{ equip.description }}</li>
                <li class='list-group-item'><b>Cost: </b>{{ equip.cost }}</li>
                <li class='list-group-item'><b>Load: </b>{{ equip.load }}</li>
                <li class='list-group-item'><b>Ability: </b>{{ equip.ability }}</li>
                <li class='list-group-item'><b>Initiative: </b>{{ equip.init }}</li>
                <li class='list-group-item'><b>Defense: </b>{{ equip.dfn }}</li>
                <li class='list-group-item'><b>Damage: </b>{{ equip.dam }}</li>
                <li class='list-group-item'><b>Strength: </b>{{ equip.strength }}</li>
                <li class='list-group-item'><b>Range: </b>{{ equip.range }}</li>
            </ul>
        </div>
        <div class="col-1">
            <a href="{{ equip.get_delete_url }}"><i class="bi bi-trash" style="color: red"></i></a>
        </div>
        </div>
    {% endfor %}
    <div class="row border-bottom bg-info"><div class="col-6"> &emsp; Armor </div><div class="col">
            <button type="button" class="btn-primary btn" data-toggle="modal" data-target="#armorModal">Add Armor</button>
        </div></div>
    {% for equip in ss.armor_set.all %}
        <div class="row">
        <div class="col-6">
            {{ equip }}
        </div>
        <div class="col">
            <ul class='list-group'>
                <li class='list-group-item'><b>Description: </b>{{ equip.description }}</li>
                <li class='list-group-item'><b>Type: </b>{{ equip.type }}</li>
                <li class='list-group-item'><b>Cost: </b>{{ equip.cost }}</li>
                <li class='list-group-item'><b>Load: </b>{{ equip.load }}</li>
                <li class='list-group-item'><b>Protection: </b>{{ equip.prot }}</li>
                <li class='list-group-item'><b>Partial Protection: </b>{{ equip.partialProt }}</li>
                <li class='list-group-item'><b>Partial Load: </b>{{ equip.partialLoad }}</li>
            </ul>
        </div>
        <div class="col-1">
            <a href="{{ equip.get_delete_url }}"><i class="bi bi-trash" style="color: red"></i></a>
        </div>
        </div>
    {% endfor %}
    <div class="row border-bottom bg-info"><div class="col-6"> &emsp; Misc Equipment </div><div class="col">
            <button type="button" class="btn-primary btn" data-toggle="modal" data-target="#miscModal">Add Misc Equipment</button>
        </div></div>
    {% for equip in ss.miscequip_set.all %}
        <div class="row">
        <div class="col-6">
            {{ equip }}
        </div>
        <div class="col">
            <ul class='list-group'>
                <li class='list-group-item'><b>Description: </b>{{ equip.description }}</li>
                <li class='list-group-item'><b>Type: </b>{{ equip.type }}</li>
                <li class='list-group-item'><b>Cost: </b>{{ equip.cost }}</li>
                <li class='list-group-item'><b>Load: </b>{{ equip.load }}</li>
            </ul>
        </div>
        <div class="col-1">
            <a href="{{ equip.get_delete_url }}"><i class="bi bi-trash" style="color: red"></i></a>
        </div>
        </div>
    {% endfor %}
{% endblock %}
